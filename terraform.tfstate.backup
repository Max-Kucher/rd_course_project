{"version":4,"terraform_version":"1.8.2","serial":53,"lineage":"eaa603cb-7d14-67d8-164b-32067bf65b4a","outputs":{},"resources":[{"mode":"managed","type":"aws_api_gateway_account","name":"account","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"api_key_version":"4","cloudwatch_role_arn":"arn:aws:iam::527245077897:role/APIGatewayCloudWatchLogsRole","features":["UsagePlans"],"id":"api-gateway-account","throttle_settings":[{"burst_limit":5000,"rate_limit":10000}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_iam_role.api_gateway_cloudwatch_role"]}]},{"mode":"managed","type":"aws_api_gateway_deployment","name":"rdcp_api_deployment","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"canary_settings":[],"created_date":"2024-09-11T20:46:46Z","description":"","execution_arn":"arn:aws:execute-api:eu-north-1:527245077897:ac0sqlvte4/prod","id":"ttrx4h","invoke_url":"https://ac0sqlvte4.execute-api.eu-north-1.amazonaws.com/prod","rest_api_id":"ac0sqlvte4","stage_description":null,"stage_name":"prod","triggers":null,"variables":null},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_integration.rdcp_get_integration","aws_api_gateway_integration.rdcp_post_integration","aws_api_gateway_method.rdcp_get_method","aws_api_gateway_method.rdcp_post_method","aws_api_gateway_resource.rdcp_post_resource","aws_api_gateway_rest_api.rdcp_api_gateway","aws_db_subnet_group.main","aws_iam_policy.cloudwatch_logs_policy","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_get_lambda","aws_lambda_function.rdcp_post_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_api_gateway_integration","name":"rdcp_get_integration","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"cache_key_parameters":[],"cache_namespace":"xryrg2","connection_id":"","connection_type":"INTERNET","content_handling":"","credentials":"","http_method":"GET","id":"agi-ac0sqlvte4-xryrg2-GET","integration_http_method":"GET","passthrough_behavior":"WHEN_NO_MATCH","request_parameters":{},"request_templates":{},"resource_id":"xryrg2","rest_api_id":"ac0sqlvte4","timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_get_lambda/invocations"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_method.rdcp_get_method","aws_api_gateway_resource.rdcp_post_resource","aws_api_gateway_rest_api.rdcp_api_gateway","aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_get_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_api_gateway_integration","name":"rdcp_post_integration","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"cache_key_parameters":[],"cache_namespace":"xryrg2","connection_id":"","connection_type":"INTERNET","content_handling":"","credentials":"","http_method":"POST","id":"agi-ac0sqlvte4-xryrg2-POST","integration_http_method":"POST","passthrough_behavior":"WHEN_NO_MATCH","request_parameters":{},"request_templates":{},"resource_id":"xryrg2","rest_api_id":"ac0sqlvte4","timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_post_lambda/invocations"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_method.rdcp_post_method","aws_api_gateway_resource.rdcp_post_resource","aws_api_gateway_rest_api.rdcp_api_gateway","aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_post_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_api_gateway_method","name":"rdcp_get_method","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"api_key_required":false,"authorization":"NONE","authorization_scopes":[],"authorizer_id":"","http_method":"GET","id":"agm-ac0sqlvte4-xryrg2-GET","operation_name":"","request_models":{},"request_parameters":{},"request_validator_id":"","resource_id":"xryrg2","rest_api_id":"ac0sqlvte4"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_resource.rdcp_post_resource","aws_api_gateway_rest_api.rdcp_api_gateway"]}]},{"mode":"managed","type":"aws_api_gateway_method","name":"rdcp_post_method","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"api_key_required":false,"authorization":"NONE","authorization_scopes":[],"authorizer_id":"","http_method":"POST","id":"agm-ac0sqlvte4-xryrg2-POST","operation_name":"","request_models":{},"request_parameters":{},"request_validator_id":"","resource_id":"xryrg2","rest_api_id":"ac0sqlvte4"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_resource.rdcp_post_resource","aws_api_gateway_rest_api.rdcp_api_gateway"]}]},{"mode":"managed","type":"aws_api_gateway_method_settings","name":"prod_method_settings","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"ac0sqlvte4-prod-*/*","method_path":"*/*","rest_api_id":"ac0sqlvte4","settings":[{"cache_data_encrypted":false,"cache_ttl_in_seconds":300,"caching_enabled":false,"data_trace_enabled":false,"logging_level":"INFO","metrics_enabled":true,"require_authorization_for_cache_control":true,"throttling_burst_limit":-1,"throttling_rate_limit":-1,"unauthorized_cache_control_header_strategy":"SUCCEED_WITH_RESPONSE_HEADER"}],"stage_name":"prod"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_deployment.rdcp_api_deployment","aws_api_gateway_integration.rdcp_get_integration","aws_api_gateway_integration.rdcp_post_integration","aws_api_gateway_method.rdcp_get_method","aws_api_gateway_method.rdcp_post_method","aws_api_gateway_resource.rdcp_post_resource","aws_api_gateway_rest_api.rdcp_api_gateway","aws_api_gateway_stage.prod_stage","aws_cloudwatch_log_group.api_gateway_logs","aws_db_subnet_group.main","aws_iam_policy.cloudwatch_logs_policy","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_get_lambda","aws_lambda_function.rdcp_post_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_api_gateway_resource","name":"rdcp_post_resource","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"xryrg2","parent_id":"vfq6w41zv5","path":"/users","path_part":"users","rest_api_id":"ac0sqlvte4"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_rest_api.rdcp_api_gateway"]}]},{"mode":"managed","type":"aws_api_gateway_rest_api","name":"rdcp_api_gateway","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"api_key_source":"HEADER","arn":"arn:aws:apigateway:eu-north-1::/restapis/ac0sqlvte4","binary_media_types":[],"body":null,"created_date":"2024-09-11T20:45:14Z","description":"","disable_execute_api_endpoint":false,"endpoint_configuration":[{"types":["EDGE"],"vpc_endpoint_ids":[]}],"execution_arn":"arn:aws:execute-api:eu-north-1:527245077897:ac0sqlvte4","fail_on_warnings":null,"id":"ac0sqlvte4","minimum_compression_size":"","name":"rdcp_api_gateway","parameters":null,"policy":"","put_rest_api_mode":null,"root_resource_id":"vfq6w41zv5","tags":{},"tags_all":{}},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_api_gateway_stage","name":"prod_stage","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"access_log_settings":[{"destination_arn":"arn:aws:logs:eu-north-1:527245077897:log-group:/aws/api-gateway/rdcp-api-gateway","format":"{\"caller\":\"$context.identity.caller\",\"httpMethod\":\"$context.httpMethod\",\"ip\":\"$context.identity.sourceIp\",\"protocol\":\"$context.protocol\",\"requestId\":\"$context.requestId\",\"requestTime\":\"$context.requestTime\",\"resourcePath\":\"$context.resourcePath\",\"responseLength\":\"$context.responseLength\",\"status\":\"$context.status\",\"user\":\"$context.identity.user\"}"}],"arn":"arn:aws:apigateway:eu-north-1::/restapis/ac0sqlvte4/stages/prod","cache_cluster_enabled":false,"cache_cluster_size":"","canary_settings":[],"client_certificate_id":"","deployment_id":"ttrx4h","description":"","documentation_version":"","execution_arn":"arn:aws:execute-api:eu-north-1:527245077897:ac0sqlvte4/prod","id":"ags-ac0sqlvte4-prod","invoke_url":"https://ac0sqlvte4.execute-api.eu-north-1.amazonaws.com/prod","rest_api_id":"ac0sqlvte4","stage_name":"prod","tags":null,"tags_all":{},"variables":null,"web_acl_arn":"","xray_tracing_enabled":false},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_deployment.rdcp_api_deployment","aws_api_gateway_integration.rdcp_get_integration","aws_api_gateway_integration.rdcp_post_integration","aws_api_gateway_method.rdcp_get_method","aws_api_gateway_method.rdcp_post_method","aws_api_gateway_resource.rdcp_post_resource","aws_api_gateway_rest_api.rdcp_api_gateway","aws_cloudwatch_log_group.api_gateway_logs","aws_db_subnet_group.main","aws_iam_policy.cloudwatch_logs_policy","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_get_lambda","aws_lambda_function.rdcp_post_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_cloudwatch_log_group","name":"api_gateway_logs","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:logs:eu-north-1:527245077897:log-group:/aws/api-gateway/rdcp-api-gateway","id":"/aws/api-gateway/rdcp-api-gateway","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/api-gateway/rdcp-api-gateway","name_prefix":"","retention_in_days":14,"skip_destroy":false,"tags":{},"tags_all":{}},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_db_subnet_group","name":"main","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:rds:eu-north-1:527245077897:subgrp:aurora_subnet_group","description":"Subnet group for Aurora","id":"aurora_subnet_group","name":"aurora_subnet_group","name_prefix":"","subnet_ids":["subnet-0aec08863ab604e41","subnet-0e5421687687f5133"],"supported_network_types":["IPV4"],"tags":{},"tags_all":{},"vpc_id":"vpc-0ec65bf8689d8a2a6"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_iam_policy","name":"cloudwatch_logs_policy","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::527245077897:policy/APIGatewayCloudWatchLogsPolicy","attachment_count":1,"description":"","id":"arn:aws:iam::527245077897:policy/APIGatewayCloudWatchLogsPolicy","name":"APIGatewayCloudWatchLogsPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:DescribeLogGroups\",\"logs:DescribeLogStreams\",\"logs:PutLogEvents\",\"logs:GetLogEvents\",\"logs:FilterLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAXVQSBNWE5DS2UKLQJ","tags":{},"tags_all":{}},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_iam_role","name":"api_gateway_cloudwatch_role","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::527245077897:role/APIGatewayCloudWatchLogsRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2024-09-12T07:25:18Z","description":"","force_detach_policies":false,"id":"APIGatewayCloudWatchLogsRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::527245077897:policy/APIGatewayCloudWatchLogsPolicy"],"max_session_duration":3600,"name":"APIGatewayCloudWatchLogsRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAXVQSBNWEU6L3RBKYQ"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_iam_role","name":"rdcp_lambda_role","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:iam::527245077897:role/rdcp_lambda_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2024-09-11T16:58:50Z","description":"","force_detach_policies":false,"id":"rdcp_lambda_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::527245077897:policy/service-role/AWSLambdaVPCAccessExecutionRole-120edba1-f195-44e1-9cde-4d59f9e5f256","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"rdcp_lambda_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAXVQSBNWERNLV33ZZW"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_iam_role_policy_attachment","name":"attach_cloudwatch_logs_policy","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"APIGatewayCloudWatchLogsRole-20240912072519083500000001","policy_arn":"arn:aws:iam::527245077897:policy/APIGatewayCloudWatchLogsPolicy","role":"APIGatewayCloudWatchLogsRole"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_iam_policy.cloudwatch_logs_policy","aws_iam_role.api_gateway_cloudwatch_role"]}]},{"mode":"managed","type":"aws_iam_role_policy_attachment","name":"rdcp_lambda_policy","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"id":"rdcp_lambda_role-20240911165850427900000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"rdcp_lambda_role"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_iam_role.rdcp_lambda_role"]}]},{"mode":"managed","type":"aws_lambda_function","name":"rdcp_create_table_lambda","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_create_table_lambda","code_sha256":"0yNDGwWrgMbiK9PWut6svIokbUv8XGAPpYoExo+BAMI=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"aurora-cluster.cluster-cl64sgsqo8h8.eu-north-1.rds.amazonaws.com","DB_NAME":"rdcp_users","DB_PASSWORD":"password123","DB_USER":"db_admin"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"lambda_zip/create_table_lambda.zip","function_name":"rdcp_create_table_lambda","handler":"index.handler","id":"rdcp_create_table_lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_create_table_lambda/invocations","kms_key_arn":"","last_modified":"2024-09-12T07:17:49.000+0000","layers":["arn:aws:lambda:eu-north-1:527245077897:layer:pg_layer:1"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/rdcp_create_table_lambda","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_create_table_lambda:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_create_table_lambda:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::527245077897:role/rdcp_lambda_role","runtime":"nodejs18.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"0yNDGwWrgMbiK9PWut6svIokbUv8XGAPpYoExo+BAMI=","source_code_size":564,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[{"ipv6_allowed_for_dual_stack":false,"security_group_ids":["sg-06a75bfbef1fae205"],"subnet_ids":["subnet-0aec08863ab604e41","subnet-0e5421687687f5133"],"vpc_id":"vpc-0ec65bf8689d8a2a6"}]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19","dependencies":["aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_lambda_function","name":"rdcp_get_lambda","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_get_lambda","code_sha256":"V3F3RvKsNKyJfZ2Q0u4IjpmFAq3GPQi6GRjtUWlGuNg=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"aurora-cluster.cluster-cl64sgsqo8h8.eu-north-1.rds.amazonaws.com","DB_NAME":"rdcp_users","DB_PASSWORD":"password123","DB_USER":"db_admin"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"lambda_zip/get_handler.zip","function_name":"rdcp_get_lambda","handler":"index.handler","id":"rdcp_get_lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_get_lambda/invocations","kms_key_arn":"","last_modified":"2024-09-12T07:17:44.000+0000","layers":["arn:aws:lambda:eu-north-1:527245077897:layer:pg_layer:1"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/rdcp_get_lambda","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_get_lambda:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_get_lambda:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::527245077897:role/rdcp_lambda_role","runtime":"nodejs18.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"V3F3RvKsNKyJfZ2Q0u4IjpmFAq3GPQi6GRjtUWlGuNg=","source_code_size":490,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[{"ipv6_allowed_for_dual_stack":false,"security_group_ids":["sg-06a75bfbef1fae205"],"subnet_ids":["subnet-0aec08863ab604e41","subnet-0e5421687687f5133"],"vpc_id":"vpc-0ec65bf8689d8a2a6"}]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19","dependencies":["aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_lambda_function","name":"rdcp_post_lambda","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"architectures":["x86_64"],"arn":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_post_lambda","code_sha256":"KIExBRvBPkYhCPka3txoZOil/sPnD2ozMfbLdh7w/m0=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"aurora-cluster.cluster-cl64sgsqo8h8.eu-north-1.rds.amazonaws.com","DB_NAME":"rdcp_users","DB_PASSWORD":"password123","DB_USER":"db_admin"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"lambda_zip/post_handler.zip","function_name":"rdcp_post_lambda","handler":"index.handler","id":"rdcp_post_lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_post_lambda/invocations","kms_key_arn":"","last_modified":"2024-09-12T07:17:55.000+0000","layers":["arn:aws:lambda:eu-north-1:527245077897:layer:pg_layer:1"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/rdcp_post_lambda","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_post_lambda:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-north-1:527245077897:function:rdcp_post_lambda:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::527245077897:role/rdcp_lambda_role","runtime":"nodejs18.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"KIExBRvBPkYhCPka3txoZOil/sPnD2ozMfbLdh7w/m0=","source_code_size":561,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[{"ipv6_allowed_for_dual_stack":false,"security_group_ids":["sg-06a75bfbef1fae205"],"subnet_ids":["subnet-0aec08863ab604e41","subnet-0e5421687687f5133"],"vpc_id":"vpc-0ec65bf8689d8a2a6"}]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19","dependencies":["aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_lambda_invocation","name":"invoke_create_table","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"function_name":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_create_table_lambda","id":"arn:aws:lambda:eu-north-1:527245077897:function:rdcp_create_table_lambda_$LATEST_4d512869848a3daab08339bf60633b7c","input":"{\"terraform\":true}","lifecycle_scope":"CREATE_ONLY","qualifier":"$LATEST","result":"{\"statusCode\":200,\"body\":\"{\\\"message\\\":\\\"Table created successfully\\\"}\"}","terraform_key":"tf","triggers":null},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_create_table_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_rds_cluster_instance.aurora_instance","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_lambda_layer_version","name":"pg_layer","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"arn":"arn:aws:lambda:eu-north-1:527245077897:layer:pg_layer:1","code_sha256":"na8c01LSx/RI85AR8IDNUEwREycqtZJUBIcWStOshiE=","compatible_architectures":[],"compatible_runtimes":["nodejs18.x"],"created_date":"2024-09-11T17:06:33.046+0000","description":"","filename":"lambda_zip/lambda_pg_layer.zip","id":"arn:aws:lambda:eu-north-1:527245077897:layer:pg_layer:1","layer_arn":"arn:aws:lambda:eu-north-1:527245077897:layer:pg_layer","layer_name":"pg_layer","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":176691,"version":"1"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"aws_lambda_permission","name":"api_gateway_invoke","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"rdcp_post_lambda","function_url_auth_type":null,"id":"AllowAPIGatewayInvoke","principal":"apigateway.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:eu-north-1:527245077897:ac0sqlvte4/*/*","statement_id":"AllowAPIGatewayInvoke","statement_id_prefix":""},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_rest_api.rdcp_api_gateway","aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_post_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_lambda_permission","name":"api_gateway_invoke_get","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":0,"attributes":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"rdcp_get_lambda","function_url_auth_type":null,"id":"AllowAPIGatewayInvokeGet","principal":"apigateway.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:eu-north-1:527245077897:ac0sqlvte4/*/*","statement_id":"AllowAPIGatewayInvokeGet","statement_id_prefix":""},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["aws_api_gateway_rest_api.rdcp_api_gateway","aws_db_subnet_group.main","aws_iam_role.rdcp_lambda_role","aws_lambda_function.rdcp_get_lambda","aws_lambda_layer_version.pg_layer","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_rds_cluster","name":"aurora_cluster","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"allocated_storage":1,"allow_major_version_upgrade":null,"apply_immediately":null,"arn":"arn:aws:rds:eu-north-1:527245077897:cluster:aurora-cluster","availability_zones":["eu-north-1a","eu-north-1b","eu-north-1c"],"backtrack_window":0,"backup_retention_period":1,"ca_certificate_identifier":null,"ca_certificate_valid_till":null,"cluster_identifier":"aurora-cluster","cluster_identifier_prefix":"","cluster_members":["aurora-instance-0"],"cluster_resource_id":"cluster-IQTQ74HZ37G264N3YE36CRNY5I","copy_tags_to_snapshot":false,"database_name":"rdcp_users","db_cluster_instance_class":"","db_cluster_parameter_group_name":"default.aurora-postgresql15","db_instance_parameter_group_name":null,"db_subnet_group_name":"aurora_subnet_group","db_system_id":"","delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_iam_role_name":"","enable_global_write_forwarding":false,"enable_http_endpoint":false,"enable_local_write_forwarding":false,"enabled_cloudwatch_logs_exports":[],"endpoint":"aurora-cluster.cluster-cl64sgsqo8h8.eu-north-1.rds.amazonaws.com","engine":"aurora-postgresql","engine_lifecycle_support":"open-source-rds-extended-support","engine_mode":"provisioned","engine_version":"15.4","engine_version_actual":"15.4","final_snapshot_identifier":null,"global_cluster_identifier":"","hosted_zone_id":"Z3MPDEQW7KHUGY","iam_database_authentication_enabled":false,"iam_roles":[],"id":"aurora-cluster","iops":0,"kms_key_id":"","manage_master_user_password":null,"master_password":"password123","master_user_secret":[],"master_user_secret_kms_key_id":null,"master_username":"db_admin","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"02:18-02:48","preferred_maintenance_window":"mon:23:41-tue:00:11","reader_endpoint":"aurora-cluster.cluster-ro-cl64sgsqo8h8.eu-north-1.rds.amazonaws.com","replication_source_identifier":"","restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[],"skip_final_snapshot":true,"snapshot_identifier":null,"source_region":null,"storage_encrypted":false,"storage_type":"","tags":{},"tags_all":{},"timeouts":null,"vpc_security_group_ids":["sg-06a75bfbef1fae205"]},"sensitive_attributes":[[{"type":"get_attr","value":"master_password"}]],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo3MjAwMDAwMDAwMDAwLCJkZWxldGUiOjcyMDAwMDAwMDAwMDAsInVwZGF0ZSI6NzIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9","dependencies":["aws_db_subnet_group.main","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_rds_cluster_instance","name":"aurora_instance","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"index_key":0,"schema_version":0,"attributes":{"apply_immediately":null,"arn":"arn:aws:rds:eu-north-1:527245077897:db:aurora-instance-0","auto_minor_version_upgrade":true,"availability_zone":"eu-north-1a","ca_cert_identifier":"rds-ca-rsa2048-g1","cluster_identifier":"aurora-cluster","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","db_parameter_group_name":"default.aurora-postgresql15","db_subnet_group_name":"aurora_subnet_group","dbi_resource_id":"db-FBCZVKWC6NXUPT2L3IWZMAAVK4","endpoint":"aurora-instance-0.cl64sgsqo8h8.eu-north-1.rds.amazonaws.com","engine":"aurora-postgresql","engine_version":"15.4","engine_version_actual":"15.4","id":"aurora-instance-0","identifier":"aurora-instance-0","identifier_prefix":"","instance_class":"db.r5.large","kms_key_id":"","monitoring_interval":0,"monitoring_role_arn":"","network_type":"IPV4","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"preferred_backup_window":"02:18-02:48","preferred_maintenance_window":"thu:02:57-thu:03:27","promotion_tier":0,"publicly_accessible":false,"storage_encrypted":false,"tags":{},"tags_all":{},"timeouts":null,"writer":true},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInVwZGF0ZSI6NTQwMDAwMDAwMDAwMH19","dependencies":["aws_db_subnet_group.main","aws_rds_cluster.aurora_cluster","aws_security_group.rdcp_rds_sg","aws_subnet.main_subnet_1a","aws_subnet.main_subnet_1b","aws_vpc.main"]}]},{"mode":"managed","type":"aws_security_group","name":"rdcp_rds_sg","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:527245077897:security-group/sg-06a75bfbef1fae205","description":"Security group for Aurora cluster","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-06a75bfbef1fae205","ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"aurora_sg","name_prefix":"","owner_id":"527245077897","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0ec65bf8689d8a2a6"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=","dependencies":["aws_vpc.main"]}]},{"mode":"managed","type":"aws_subnet","name":"main_subnet_1a","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:527245077897:subnet/subnet-0e5421687687f5133","assign_ipv6_address_on_creation":false,"availability_zone":"eu-north-1a","availability_zone_id":"eun1-az1","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0e5421687687f5133","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"527245077897","private_dns_hostname_type_on_launch":"ip-name","tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0ec65bf8689d8a2a6"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9","dependencies":["aws_vpc.main"]}]},{"mode":"managed","type":"aws_subnet","name":"main_subnet_1b","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:527245077897:subnet/subnet-0aec08863ab604e41","assign_ipv6_address_on_creation":false,"availability_zone":"eu-north-1b","availability_zone_id":"eun1-az2","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0aec08863ab604e41","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"527245077897","private_dns_hostname_type_on_launch":"ip-name","tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0ec65bf8689d8a2a6"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9","dependencies":["aws_vpc.main"]}]},{"mode":"managed","type":"aws_vpc","name":"main","provider":"provider[\"registry.opentofu.org/hashicorp/aws\"]","instances":[{"schema_version":1,"attributes":{"arn":"arn:aws:ec2:eu-north-1:527245077897:vpc/vpc-0ec65bf8689d8a2a6","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-0528e9c375f5dfc28","default_route_table_id":"rtb-09cc0c20db85c9773","default_security_group_id":"sg-0f57e661c538170ae","dhcp_options_id":"dopt-07b5b80c8f2174616","enable_dns_hostnames":false,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-0ec65bf8689d8a2a6","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-09cc0c20db85c9773","owner_id":"527245077897","tags":{},"tags_all":{}},"sensitive_attributes":[],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="}]}],"check_results":null}
